<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HSK 1 — Study App v1.3.1</title>
  <link rel="stylesheet" href="styles.css" />
  <meta name="theme-color" content="#0b0f14">
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="logo">HSK 1 · 500 — v1.3.1</div>
      <nav class="tabs">
        <button class="tab active" data-tab="dashboard">Dashboard</button>
        <button class="tab" data-tab="study">Study</button>
        <button class="tab" data-tab="quiz">Quizzes</button>
        <button class="tab" data-tab="progress">Progress</button>
        <button class="tab" data-tab="settings">Settings</button>
        <button class="tab" data-tab="data">Data</button>
        <button class="tab" data-tab="importexport">Import/Export</button>
      </nav>
    </header>

    <main>
      <section id="dashboard" class="panel active">
        <h1>New HSK 3.0 Band 1 — 500 words. Everything stays on-device.</h1>
        <div class="cards">
          <div class="card">
            <div class="card-title">Today</div>
            <div class="card-body">
              <div id="today-stats"></div>
              <button id="start-15" class="primary">Start · 15 new</button>
              <button id="start-reviews" class="ghost">Review due</button>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Progress</div>
            <div class="card-body">
              <div id="streak">Streak: 0</div>
              <div id="xp">XP: 0 · Level 1</div>
              <div id="badges" class="badges"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Offline</div>
            <div class="card-body">
              <button id="bake-data" class="primary">Bake data now</button>
              <div class="muted" id="bake-status">Local dataset: placeholder (click to bake)</div>
            </div>
          </div>
        </div>
      </section>

      <section id="study" class="panel">
        <div class="study-wrap">
          <div id="card-area" class="flashcard">
            <div id="card-front" class="card-side">
              <div id="hanzi" class="hanzi">你好</div>
              <div id="pinyin-front" class="pinyin-front">nǐ hǎo</div>
              <div class="hint">Tap to reveal meaning</div>
            </div>
            <div id="card-back" class="card-side hidden">
              <div id="pinyin" class="pinyin">nǐ hǎo</div>
              <div id="english" class="english">hello</div>
              <div id="example" class="example">你好！</div>
              <div class="audio-row">
                <button id="speak-word">Play word</button>
                <button id="speak-sent">Play sentence</button>
                <select id="rate">
                  <option value="0.5">0.5×</option>
                  <option value="1" selected>1×</option>
                  <option value="1.5">1.5×</option>
                </select>
              </div>
            </div>
          </div>

          <div class="srs-row">
            <button class="srs-btn again" data-grade="0">Again</button>
            <button class="srs-btn hard" data-grade="3">Hard</button>
            <button class="srs-btn good" data-grade="4">Good</button>
            <button class="srs-btn easy" data-grade="5">Easy</button>
          </div>

          <div class="queue-info" id="queue-info">Queue — New: 0 · Review: 0</div>
        </div>
      </section>

      <section id="quiz" class="panel">
        <h2>Quizzes</h2>
        <div class="quiz-controls">
          <button data-quiz="mcq" class="primary">Multiple Choice</button>
          <button data-quiz="listening" class="ghost">Listening</button>
          <button data-quiz="matching" class="ghost">Matching</button>
          <button data-quiz="cloze" class="ghost">Cloze (missing word)</button>
        </div>
        <div id="quiz-area"></div>
        <div id="quiz-recap" class="recap hidden"></div>
      </section>

      <section id="progress" class="panel">
        <h2>Progress</h2>
        <div id="progress-stats"></div>
        <div class="tags">
          <h3>By Tag</h3>
          <div id="tag-progress"></div>
        </div>
      </section>

      <section id="settings" class="panel">
        <h2>Settings</h2>
        <div class="settings-grid">
          <label>New cards / day
            <input id="new-per-day" type="number" min="1" max="100" value="15" />
          </label>
          <label>Max reviews / day
            <input id="max-reviews" type="number" min="20" max="999" value="999" />
          </label>
          <label>Session length target (minutes)
            <input id="session-mins" type="number" min="5" max="180" value="60" />
          </label>
          <label>Show pinyin on front
            <input id="show-pinyin" type="checkbox" checked />
          </label>
          <label>Dark theme
            <input id="dark-theme" type="checkbox" checked />
          </label>
        </div>
        <p class="muted">All data (progress) stays in your browser.</p>
      </section>

      <section id="data" class="panel">
        <h2>Data</h2>
        <div class="cards">
          <div class="card">
            <div class="card-title">HSK 1 — Dataset</div>
            <div class="card-body">
              <p class="muted">Local baked file: <code>data/hsk1_500.json</code>. You can replace it any time.</p>
              <button id="download-dataset" class="ghost">Download current dataset</button>
              <button id="bake-data-2" class="primary">Bake data now</button>
              <div id="bake-log" class="muted" style="white-space:pre-wrap"></div>
            </div>
          </div>
        </div>
      </section>

      <section id="importexport" class="panel">
        <h2>Import / Export</h2>
        <div class="import-export">
          <button id="export-csv" class="ghost">Export progress CSV</button>
          <input type="file" id="import-csv" accept=".csv" />
          <label for="import-csv" class="primary">Import CSV</label>
        </div>
        <p class="muted">Format: simplified,pinyin,english,pos,tag</p>
      </section>
    </main>

    <footer>
      <div>Built for you · v1.3.1</div>
      <div class="tiny muted">Install to Home Screen for an app-like experience. Offline supported.</div>
    </footer>
  </div>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('sw.js'));
    }
  </script>
</body>
</html>
